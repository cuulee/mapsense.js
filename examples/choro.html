<html>
<head>
	<meta charset="utf-8">
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="http://d3js.org/topojson.v1.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="https://rawgit.com/erex78/a488f626e196e43adec9/raw/5aa537595814231ca7e0e71382c8967cbbec4c78/polymaps.js" charset="utf-8"></script>

	<style>
		.map {
			background-color: white;
			width: 100%;
			height: 100%;
		}
		.mapFeatures {
			vector-effect: non-scaling-stroke;
			stroke-linejoin: round;
			stroke: white;
			stroke-width: .3;
			fill : steelblue;
			stroke-linecap: round;
		}
		.rectile {
			fill: white; }

		</style>

	</head>

	<body>
		<script>

			var po = org.polymaps;

			var mapDiv = d3.select('body')
			    .append('div').append('svg').attr('class', 'map')

			var requestParams = {
			  invertTileY: true,
			  invertY: false,
			  s: 5,
			  ringSpan: 7,
			  srid: 4326,
			  layers: 'county'
			};

			var url = "http://staging-tiles.mapsense.co/tilist/tile/canon_demo/{Z}/{X}/{Y}.topojson?";
			url += Object.keys(requestParams).map(function(k) {
			  return k + '=' + requestParams[k];
			}).join('&');
			var map = po.map()
				.container(mapDiv.node())
				.add(po.interact())
				.center({lon: -84.47559396442189, lat: 31.770941303868554})
				.zoom(6);

			var colorRamp = d3.scale.linear()
			    .domain([0, .15])
			    .range(['rgb(247,251,255)', 'rgb(8,48,107)'])
			  
			var tj = po.d3TopoJson()
				.url(url)
				.style("fill", function(feature){
					return colorRamp(feature.properties.unemployment)
				})
				.attr("class", "mapFeatures")
				.tile(true)
				.clip(true);

			map.add(tj);

		</script>
	</body>
	</html>
